
(function(a){a(document).ready(function(){var i=a("img.portfolio-lazy");i.lazyload({event:"scroll",load:function(){a(this).animate({opacity:1},200);a(window).trigger("resize");a.waypoints("refresh")},failure_limit:Math.max(i.length,0)});if(a().prettyPhoto){var m=1024,f=768,c=true;if(a(window).width()<1024){m=a(window).width();f=a(window).height();c=true}a('a[data-rel^="ut-prettyphoto"]').prettyPhoto({social_tools:false,deeplinking:false,default_width:m,default_height:f,allow_resize:c,markup:'<div class="pp_pic_holder">                             <div class="pp_top">                                 <div class="pp_left"></div>                                 <div class="pp_middle"></div>                                 <div class="pp_right"></div>                             </div>                             <div class="pp_content_container">                                 <div class="pp_left">                                 <div class="pp_right">                                     <div class="pp_content">                                         <div class="pp_loaderIcon"></div>                                         <div class="pp_fade">                                             <a href="#" class="pp_expand" title="Expand the image">Expand</a>                                             <div class="pp_hoverContainer">                                                 <a class="pp_next" href="#">next</a>                                                 <a class="pp_previous" href="#">previous</a>                                             </div>                                             <div id="pp_full_res"></div>                                             <div class="pp_details">                                                 <div class="pp_nav">                                                     <a href="#" class="pp_arrow_previous">Previous</a>                                                     <p class="currentTextHolder">0/0</p>                                                     <a href="#" class="pp_arrow_next">Next</a>                                                 </div>                                                 <div class="ppt">&nbsp;</div>                                                 <p class="pp_description"></p>                                                 {pp_social}                                                 <a class="pp_close" href="#">Close</a>                                             </div>                                         </div>                                     </div>                                 </div>                                 </div>                             </div>                             <div class="pp_bottom">                                 <div class="pp_left"></div>                                 <div class="pp_middle"></div>                                 <div class="pp_right"></div>                             </div>                         </div>                         <div class="pp_overlay"></div>'})}if(a().lightGallery){a('a[data-rel^="ut-lightgallery"]').lightGallery({selector:"this",hash:false})}a(".ut-hover").each(function(r,s){var t=a(this).closest(".ut-portfolio-wrap").data("textcolor");a(this).find(".ut-hover-layer").css({color:t});a(this).find(".ut-hover-layer").find(".portfolio-title").attr("style","color: "+t+" !important")});a(".ut-hover").on("mouseenter touchstart",function(){var s=a(this).closest(".ut-portfolio-wrap").data("hovercolor"),r=a(this).closest(".ut-portfolio-wrap").data("opacity");a(this).find(".ut-hover-layer").css("background","rgba("+s+","+r+")");a(this).find(".ut-hover-layer").css("opacity",1)});a(".ut-hover").on("mouseleave touchend",function(){a(this).find(".ut-hover-layer").css("opacity",0)});var g=false;function k(s,t){if(!s){return}var r=null;if(t==="prev"){r=a("#ut-portfolio-details-"+s).find(".active").prev().height()}if(t==="current"){r=a("#ut-portfolio-details-"+s).find(".active").height()}if(t==="next"){r=a("#ut-portfolio-details-"+s).find(".active").next().height()}a("#ut-portfolio-details-wrap-"+s).height(r+30)}function l(s){if(!s){return}var t=a("#ut-portfolio-details-"+s).find(".active").prev(".ut-portfolio-detail"),r=a("#ut-portfolio-details-"+s).find(".active").next(".ut-portfolio-detail");if(!t.length){a("#ut-portfolio-details-wrap-"+s).find(".prev-portfolio-details").animate({opacity:0},200,"easeInOutExpo",function(){a(this).css("visibility","hidden")})}else{a("#ut-portfolio-details-wrap-"+s).find(".prev-portfolio-details").animate({opacity:1},200,"easeInOutExpo",function(){a(this).css("visibility","visible")})}if(!r.length){a("#ut-portfolio-details-wrap-"+s).find(".next-portfolio-details").animate({opacity:0},200,"easeInOutExpo",function(){a(this).css("visibility","hidden")})}else{a("#ut-portfolio-details-wrap-"+s).find(".next-portfolio-details").animate({opacity:1},200,"easeInOutExpo",function(){a(this).css("visibility","visible")})}q()}function q(){a(".ut-portfolio-details-navigation").each(function(){var u=a(this),t=u.parent(),s=t.find(".active"),r=s.find(".ut-portfolio-media").height();if(r>0){u.find(".next-portfolio-details").animate({top:r/2+45});u.find(".prev-portfolio-details").animate({top:r/2+45})}else{u.find(".next-portfolio-details").animate({top:t.height()/2+45});u.find(".prev-portfolio-details").animate({top:t.height()/2+45})}})}a(window).smartresize(function(){q()});function b(r){if(!r){return}setTimeout(function(){if(r.parent().get(0).offsetHeight<r.parent().get(0).scrollHeight){r.parent().height(r.parent().get(0).scrollHeight);return}else{r.parent().height(r.height());return}},200)}a(document).on("click",".ut-portfolio-link",function(r){if(g){return false}g=true;var z=a(this).data("post"),C=a(this).data("wrap"),y=a("#ut-loader-"+C),x=a("#ut-portfolio-details-wrap-"+C),A=a("#ut-portfolio-details-"+C),t=x.find("#ut-portfolio-detail-"+z),B=A.find(".active").data("post"),s=A.find(".active").data("format"),v=x.closest("section").data("width"),u=t.data("format"),w=a("#header-section").outerHeight();y.stop(true).fadeIn(400,function(){a.scrollTo(x,650,{easing:"easeInOutExpo",offset:-w-40,axis:"y",onAfter:function(){if(s==="video"){h(A,B)}if(s==="gallery"){p(A,B)}if(v==="fullwidth"){A.addClass("grid-container")}if(z!==B){d(B)}A.find(".ut-portfolio-detail").removeClass("active").hide();t.addClass("active").css("visibility","hidden").show().slideDown(800,"easeInOutExpo",function(){if(u==="gallery"){e(z,A,function(){j(z,function(){y.fadeOut(400,function(){x.addClass("show overflow-visible");x.find(".ut-portfolio-details-navigation").addClass("show").data("single",z);t.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(C);setTimeout(function(){x.height(A.outerHeight()+50)},200);a(window).trigger("scroll");g=false})})})})}else{if(u==="video"){n(z,function(){j(z,function(){y.fadeOut(400,function(){x.addClass("show overflow-visible");x.find(".ut-portfolio-details-navigation").addClass("show").data("single",z);t.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(C);setTimeout(function(){x.height(A.outerHeight()+50)},200);a(window).trigger("scroll");g=false})})})})}else{o(z,A,function(){j(z,function(){y.fadeOut(400,function(){x.addClass("show overflow-visible");x.find(".ut-portfolio-details-navigation").addClass("show").data("single",z);t.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(C);setTimeout(function(){x.height(A.outerHeight()+50)},200);a(window).trigger("scroll");g=false})})})})}}})}})});r.preventDefault()});a(document).on("click",".next-portfolio-details",function(r){r.preventDefault();if(g){return false}g=true;var B=a(this).data("wrap"),x=a("#ut-portfolio-details-wrap-"+B),u=x.closest("section").data("width"),z=a("#ut-portfolio-details-"+B),y=a("#ut-loader-"+B),v=z.find(".active").next().data("post"),w=z.find(".active").next().data("format"),A=z.find(".active").data("post"),s=z.find(".active").data("format"),t=z.find("#ut-portfolio-detail-"+v);if(s==="video"){h(z,A)}if(s==="gallery"){p(z,A)}if(u!=="centered"){t.addClass("grid-container")}d(A);z.find("#ut-portfolio-detail-"+A).removeClass("active").fadeOut(function(){y.stop(true).fadeIn(400,function(){t.addClass("active").css("visibility","hidden").slideDown(800,"easeInOutExpo",function(){if(w==="gallery"){e(v,z,function(){j(v,function(){y.fadeOut(400,function(){z.find(".ut-portfolio-details-navigation").data("single",v);t.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(B);setTimeout(function(){x.height(z.outerHeight()+50)},200);g=false})})})})}else{if(w==="video"){n(v,function(){j(v,function(){y.fadeOut(400,function(){z.find(".ut-portfolio-details-navigation").data("single",v);t.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(B);setTimeout(function(){x.height(z.outerHeight()+50)},200);g=false})})})})}else{o(v,z,function(){j(v,function(){y.fadeOut(400,function(){z.find(".ut-portfolio-details-navigation").data("single",v);t.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(B);setTimeout(function(){x.height(z.outerHeight()+50)},200);g=false})})})})}}})})})});a(document).on("click",".prev-portfolio-details",function(r){r.preventDefault();if(g){return}g=true;var B=a(this).data("wrap"),x=a("#ut-portfolio-details-wrap-"+B),w=x.closest("section").data("width"),z=a("#ut-portfolio-details-"+B),y=a("#ut-loader-"+B),v=z.find(".active").prev().data("post"),t=z.find(".active").prev().data("format"),A=z.find(".active").data("post"),s=z.find(".active").data("format"),u=z.find("#ut-portfolio-detail-"+v);if(s==="video"){h(z,A)}if(s==="gallery"){p(z,A)}if(w!=="centered"){u.addClass("grid-container")}d(A);z.find("#ut-portfolio-detail-"+A).removeClass("active").fadeOut(function(){y.stop(true).fadeIn(400,function(){u.addClass("active").css("visibility","hidden").slideDown(800,"easeInOutExpo",function(){if(t==="gallery"){e(v,z,function(){j(v,function(){y.fadeOut(400,function(){z.find(".ut-portfolio-details-navigation").data("single",v);u.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(B);setTimeout(function(){x.height(z.outerHeight()+50)},200);g=false})})})})}else{if(t==="video"){n(v,function(){j(v,function(){y.fadeOut(400,function(){z.find(".ut-portfolio-details-navigation").data("single",v);u.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(B);setTimeout(function(){x.height(z.outerHeight()+50)},200);g=false})})})})}else{o(v,z,function(){j(v,function(){y.fadeOut(400,function(){z.find(".ut-portfolio-details-navigation").data("single",v);u.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){l(B);setTimeout(function(){x.height(z.outerHeight()+50)},200);g=false})})})})}}})})})});a(document).on("click",".close-portfolio-details",function(w){w.preventDefault();if(g){return false}g=true;var r=a(this).data("wrap"),s=a(this).parent().data("single"),v=a("#ut-portfolio-details-wrap-"+r),u=a(this).data("post"),t=a("#ut-portfolio-detail-"+s).data("format");v.find(".ut-portfolio-details-navigation").removeClass("show");v.find("#ut-portfolio-detail-"+s).removeClass("active").animate({opacity:0},200,"easeInOutExpo",function(){a("#ut-portfolio-details-wrap-"+r).removeClass("show").removeClass("overflow-visible");if(t==="video"){h(v,s)}if(t==="gallery"){p(v,s)}d(s);g=false})});function d(r){if(!r){return}a("#ut-portfolio-detail-"+r).find(".entry-content").fadeOut(400,function(){a(this).html("");a(this).show()})}function h(s,r){if(!r){return}s.find("#ut-video-call-"+r).fadeOut(400,function(){a(this).html("")})}function p(s,r){if(!r){return}if(s.find("#portfolio-gallery-slider-"+r).hasClass("ut-sliderimages-loaded")){s.find("#portfolio-gallery-slider-"+r).flexslider("destroy")}}function j(r,u){if(!r){return}var t=a("#ut-portfolio-detail-"+r),s=utPortfolio.ajaxurl;a.ajax({type:"POST",url:s,data:{action:"ut_get_portfolio_post_content",portfolio_id:r},success:function(v){t.find(".entry-content").html(v).fitVids();return false},complete:function(){if(u&&typeof(u)==="function"){u()}}})}function n(r,u){if(!r){return}var t=a("#ut-portfolio-detail-"+r),s=utPortfolio.ajaxurl;a.ajax({type:"POST",url:s,data:{action:"ut_get_portfolio_post",portfolio_id:r},success:function(v){t.find(".ut-video-call").show().html(v).fitVids();return false},complete:function(){if(u&&typeof(u)==="function"){u()}}})}function o(r,v,u){if(!r){return}var t=v.find("#ut-portfolio-detail-"+r).find(".ut-load-me"),s=t.data("original");if(!t.attr("src")){t.attr("src",s).one("load",function(){if(u&&typeof(u)==="function"){u()}})}else{if(u&&typeof(u)==="function"){u()}}}function e(r,w,v){if(!r){return}var t=w.find("#portfolio-gallery-slider-"+r);if(t.hasClass("ut-sliderimages-loaded")){t.flexslider({animation:"fade",controlNav:false,animationLoop:true,slideshow:false,smoothHeight:true,startAt:0,after:function(){b(w);q()}});if(v&&typeof(v)==="function"){v()}}var u=t.find(".ut-load-me"),s=u.length;if(s){u.each(function(){var y=a(this),x=y.data("original");y.attr("src",x).removeClass("ut-load-me").one("load",function(){if(!--s){t.flexslider({animation:"fade",controlNav:false,animationLoop:true,slideshow:false,smoothHeight:true,startAt:0,after:function(){b(w);q()}}).addClass("ut-sliderimages-loaded");if(v&&typeof(v)==="function"){v()}}})})}else{if(v&&typeof(v)==="function"){v()}}}})})(jQuery);